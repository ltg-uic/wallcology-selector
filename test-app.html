<!DOCTYPE html>
<html>
<head>
    <link href="../polymer/polymer.html" rel="import">


    <link rel="import" href="wallcology-selector.html">
</head>

<dom-module id="test-app">
    <style>

    </style>
    <template>

        <!-- toggle selectors side button/dropdown, button selectors row of selections-->
        <wallcology-selector  toggle-selectors="{{toggleSelectors}}" button-selectors={{buttonSelectors}}
                             max-selections="2" selected-items="{{selectedItems}}" current-toggle="{{currentToggle}}"></wallcology-selector>



        <!-- test output-->

        <div>currentToggle:<span>{{currentToggle.name}}</span></div>


        <div>selectedButtons
        <template is="dom-repeat" items="{{selectedItems}}">
            <span>{{item}}</span>
        </template></div>



    </template>

    <script>
        // element registration
        Polymer({
            is: 'test-app',

            // add properties and methods on the element's prototype
            properties: {
                // declare properties for the element's public API
                selectedItems: {
                    type: Array,
                    notify: true,
                    value: []
                },
                currentToggle: {
                    type: Object,
                    notify: true,
                    value: {},
                    observer: 'currentToggleChanged'
                },
                toggleSelectors: {
                    type: Array,
                    notify: true,
                    value: [
                        {
                            'items': [],
                            'name': 'Habitat ?  ',
                            'index': -1
                        },
                        {
                            'items': [
                                0,
                                1,
                                4,
                                5
                            ],
                            'name': 'Habitat 1',
                            'index': 0
                        },
                        {
                            'items': [
                                0,
                                1,
                                10,
                                11
                            ],
                            'name': 'Habitat 2',
                            'index': 1
                        },
                        {
                            'items': [
                                0,
                                1,
                                7,
                                9
                            ],
                            'name': 'Habitat 3',
                            'index': 2
                        },
                        {
                            'items': [
                                0,
                                5,
                                6,
                                10,
                                12
                            ],
                            'name': 'Habitat 4',
                            'index': 3
                        }
                    ]
                },
                buttonSelectors: {
                    type: Array,
                    notify: true,
                    value: [
                        {
                            'imgUrl': 'http://ltg.cs.uic.edu/WC/icons/1.svg',
                            'index': 0
                        },
                        {
                            'imgUrl': 'http://ltg.cs.uic.edu/WC/icons/2.svg',
                            'index': 1
                        },
                        {
                            'imgUrl': 'http://ltg.cs.uic.edu/WC/icons/3.svg',
                            'index': 2
                        },
                        {
                            'imgUrl': 'http://ltg.cs.uic.edu/WC/icons/4.svg',
                            'index': 3
                        },
                        {
                            'imgUrl': 'http://ltg.cs.uic.edu/WC/icons/5.svg',
                            'index': 4
                        },
                        {
                            'imgUrl': 'http://ltg.cs.uic.edu/WC/icons/6.svg',
                            'index': 5
                        },
                        {
                            'imgUrl': 'http://ltg.cs.uic.edu/WC/icons/7.svg',
                            'index': 6
                        },
                        {
                            'imgUrl': 'http://ltg.cs.uic.edu/WC/icons/8.svg',
                            'index': 7
                        },
                        {
                            'imgUrl': 'http://ltg.cs.uic.edu/WC/icons/9.svg',
                            'index': 8
                        },
                        {
                            'imgUrl': 'http://ltg.cs.uic.edu/WC/icons/10.svg',
                            'index': 9
                        },
                        {
                            'imgUrl': 'http://ltg.cs.uic.edu/WC/icons/11.svg',
                            'index': 10
                        },
                        {
                            'imgUrl': 'http://ltg.cs.uic.edu/WC/icons/12.svg',
                            'index': 11
                        }
                    ]
                }
            },
            observers: [
                'selectedItemsChanged(selectedItems.*)',
                'toggleSelectorsChanged(toggleSelectors.*)',
                'buttonSelectorsChanged(buttonSelectors.*)'
            ],
            selectedItemsChanged: function (changeRecord) {
                if (changeRecord.path == 'selectedItems.splices') {
                    // a user was added or removed
                } else {
                    // an individual user or its sub-properties changed
                    // check "changeRecord.path" to determine what changed


                }
            },
            toggleSelectorsChanged: function(changeRecord){

            },
            buttonSelectorsChanged: function (changeRecord) {

            },
            currentToggleChanged: function(newValue, oldValue){
                console.log('toggle changed test-app', newValue, oldValue);
            },
            ready: function () {
                this.selectedItems = [];
            }
        });
    </script>
</dom-module>
